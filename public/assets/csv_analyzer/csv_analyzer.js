((function(){var a;a=function(a){return $("#header").html(a)},this.csv_test=function(){var b;return a("Loading data..."),b="/projects.csv?"+$("#path").val(),d3.csv(b,function(c){var d,e,f,g,h,i,j,k,l,m,n;window.csv_data=c,a("Loaded "+c.length+" projects, see <a href='"+b.replace(/\.csv/,"")+"'>search results</a>\t\t\tor <a href='"+b+"'>download.</a>"),console.log(l=c[0]),e=c.length/2,window.row_stats={};for(f in l)n=l[f],k=_.pluck(c,f),j=_.without(k,"",null).length,m=_.uniq(k),g=function(){var a,b,c;c=[];for(a=0,b=k.length;a<b;a++)d=k[a],c.push((d||"").length);return c}(),h=_.max(g),i=_.min(g),row_stats[f]={unique:{count:m.length,values:m},populated:{count:j,values:function(){var a,b,e;e=[];for(a=0,b=c.length;a<b;a++)d=c[a],d[f]!==null&&d[f]!==""&&e.push(d.project_id);return e}()},empty:{count:k.length-j,values:function(){var a,b,e;e=[];for(a=0,b=c.length;a<b;a++)d=c[a],(d[f]===null||d[f]==="")&&e.push(d.project_id);return e}()},average:{length:Math.round(d3.mean(g)*100)/100},max:{length:h,value:_.find(k,function(a){return a.length===h})},min:{length:i,value:_.find(k,function(a){return a.length===i})}};$("#data").html("");for(f in row_stats)n=row_stats[f],$("#data").append("\t\t\t<tr>\t\t\t\t<td>"+f+"</td>\t\t\t\t<td>"+("<a class='csv-tooltip' href='#'title='"+n.unique.values.join(" | ").replace(/'/g,"")+"'>")+(""+n.unique.count)+"</a>"+"</td>\t\t\t\t<td>"+("<a class='csv-tooltip' href='#'title='"+n.populated.values.join(" | ").replace(/'/g,"")+"'>")+(""+n.populated.count)+"</a>"+"</td>\t\t\t\t<td>"+("<a class='csv-tooltip' href='#'title='"+n.empty.values.join(" | ").replace(/'/g,"")+"'>")+(""+n.empty.count)+"</a>"+"</td>\t\t\t\t<td>"+("<a class='csv-tooltip' href='#' title='"+n.min.value.replace(/'/g,"")+"' >"+n.min.length+"</a>")+"</td>\t\t\t\t<td>"+("<!-- a class='csv-tooltip' href='#' title='' !-->"+n.average.length+"</a>")+"</td><td>"+("<a class='csv-tooltip' href='#' title='"+n.max.value.replace(/'/g,"")+"' >"+n.max.length+"</a>")+"</td>\t\t\t</tr>");return $(".csv-tooltip").tooltip(),window.ApplySortability()})},csv_test()})).call(this);