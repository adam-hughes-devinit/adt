((function(){var a;a=function(){var a,b,c,d;return this.active_params={},a=function(){return this.other_features.forEach(function(a){return a.properties.id="non_african",this.collection.features.unshift(a)}),window.map_data=d3.nest().key(function(a){return a.properties.id}).rollup(function(a){return{value:null,value_current:null}}).entries(collection.features),window.map_data_item=function(a){var b;return b=window.map_data.filter(function(b){return b.key===a})[0],b!=null?b:null}},d=function(){var a,b,c;return a=800,c=a,b=window.vis_config,window.vis_config={label_green:d3.rgb("#819014"),c_sector:function(a){var b,c,d,e;c={};for(d=0,e=CRS_SECTOR_COLORS.length;d<e;d++)b=CRS_SECTOR_COLORS[d],c[b.name]=b.color;return c[a]},nicemoney:function(a){if(100>a)return""+d3.format("0,r")(d3.round(a,0));if(1e6>a&&a>=1e3)return""+d3.round(a/1e3,0)+"K";if(1e9>a&&a>=1e6)return""+d3.round(a/1e6,1)+"M";if(a>=1e9)return""+d3.format("0,r")(d3.round(a/1e9,2))+"B"},nicemoneyaxis:function(a){if(100>a)return""+a.toFixed(0);if(1e6>a&&a>=1e3)return""+(a/1e3).toFixed(0)+"K";if(1e9>a&&a>=1e6)return""+(a/1e6).toFixed(0)+"M";if(1e9<=a)return""+(a/1e9).toFixed(0)+"B"},w:c,h:a,xy:d3.geo.mercator().scale(c*4.5).translate([.125*c,.375*a]),c:d3.scale.linear().domain([0,8e9,15e10]).range(["#FAEDD9","#808F12","#2A5C0B"]),logscale:d3.scale.log().domain([1,15e10]),grayscalec:d3.scale.linear().domain([2,3]).range(["#000000","#FFFFFF"]),money:d3.format("0,r"),years:d3.range(2e3,2012),total_cdf_in_view:0,active_params:{},bigger_font_size:d3.max([.0175*c,13]),medium_font_size:d3.max([.015*c,12]),smaller_font_size:d3.max([.0125*c,10])},window.vis_config.path=d3.geo.path().projection(window.vis_config.xy),this.vis=d3.select("#vis").append("svg:svg").attr("id","africa-map").attr("width",c).attr("height",a),this.vis.append("svg:defs").append("svg:filter").attr("id","blur").append("svg:feGaussianBlur").attr("stdDeviation",5),"finished"},c=function(){var a,b,c;return b=vis.append("svg:g").attr("id","states").attr("transform","translate(100,"+window.vis_config.w/7+")"),c=b.append("svg:path").attr("id","ocean_outline").attr("d",this.ocean_outline_d).attr("stroke-width",10).attr("stroke","darkblue").style("fill","transparent").attr("transform","scale("+window.vis_config.h/800+") translate(-130, -"+.156875*window.vis_config.h+")").attr("filter","url(#blur)"),a=d3.select("#states").selectAll(".country").data(this.collection.features).enter().append("svg:path").attr("class",function(a){return a.properties.id==="non_african"?"non_african":"fuzz country"}).attr("id",function(a,b){return a.properties.id==="non_african"?"":a.properties.id}).attr("name",function(a){return a.properties.name}).attr("d",window.vis_config.path).attr("stroke-width",1).attr("stroke","#333").attr("fill","#777").attr("filter","url(#blur)"),$("path#CV").attr("transform","translate (80,100)")},b=function(){var a,b,c,d;return c=window.vis_config.h,d=window.vis_config.w,a=[[0,0,0,c],[0,c,d,c],[d,c,d,0],[d,0,0,0]],b=vis.append("svg:g").attr("id","border_lines").selectAll(".border_line").data(a).enter().append("svg:line").attr("class","border_line").attr("x1",function(a){return a[0]}).attr("y1",function(a){return a[1]}).attr("x2",function(a){return a[2]}).attr("y2",function(a){return a[3]}).attr("stroke","#eee").attr("stroke-width",8)},a(),d(),c(),b(),"finished"},a()})).call(this);