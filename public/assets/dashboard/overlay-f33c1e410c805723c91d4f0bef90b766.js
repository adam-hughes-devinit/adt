((function(){var a,b,c=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};this.App=this.App||{},$("#overlay").on("hidden",App.render_url_from_html_state),$("#overlay").on("shown",App.render_url_from_html_state),App.show_overlay=function(a,b){return $("#overlay").modal("show"),App.render_overlay_content(a,b)},App.render_overlay_content=function(d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r;return n=(e!=null?e.per_page:void 0)||50,m=(e!=null?e.page:void 0)||1,console.log("overlay with:",e,"| page:",m,"| per_page:",n),console.log("Getting all filters",d),r=App.current_x_axis(),i=function(){var a,b,c,d;c=App.get_all_filters(),d=[];for(a=0,b=c.length;a<b;a++)g=c[a],g.key!==r&&d.push(g);return d}(),console.log("about to filter by click with x-axis",r),h=App.projects.where(function(a,b){var e;return e=!1,a.get(r,b)===""+d&&(e=!0,i.forEach(function(d){var f;if(d.values.length>0&&!(f=a.get(d.key,b),c.call(d.values,f)>=0))return e=!1})),e}),console.log("filtering by ",i,"returned",h),h=h[0].map(function(a,b){var c;return c={},App.attributes.map(function(a){return h[a].type!=="numeric"?c[a]=h[a].lut[h[a][b]]:c[a]=h[a][b]}),c}),h=_.sortBy(h,function(a){return-a[App.values[0]]}),l=h.length,q=(m-1)*n,f=q+n,f>l&&(f=l-1),p=function(){var a,c;c=[];for(j=a=q;q<=f?a<=f:a>=f;j=q<=f?++a:--a)c.push(b(h[j],j));return c}(),console.log("from "+q+" to "+f+" found "+p.length+" rows:"),m>1&&(o="<span class='pager-modal' onclick='App.render_overlay_content(\""+d+'", {page: '+(m-1)+"})'>\t\t\t\t&larr; Prev \t\t\t</span>"),l>m*n&&(k="<span class='pager-modal'  onclick='App.render_overlay_content(\""+d+'", {page: '+(m+1)+"})'>\t\t\t\tNext &rarr; \t\t\t</span>"),$("#overlay_header").html("\t\t\t"+(o||"")+"\t\t\t<span id='overlay_target'>"+d+"</span>:\t\t\tShowing records "+(q+1)+"-"+(f+1)+" of "+h.length+".\t\t\t"+(k||"")+"\t "),$(".modal-body").html("<table class='table table-hover'>\t\t\t"+a(App.projects)+"\t\t\t"+p.join("")+"\t\t</table>"),$(".overlay-tooltip").tooltip(),$(".modal-footer #page-number").text(m)},a=function(a){var b,c;return c=function(){var c,d,e;e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(b.name);return e}(),"<tr><th>#</th><th> "+c.join("</th><th>")+"</th></tr>"},b=function(a,b){var c,d,e,f,g,h,i,j;h=[],h=_.values(a);for(g=i=0,j=a.length;i<j;g=++i)f=a[g],h[f]=g;return(e=App.config.data.record_hyperlink_function)?(d=e(a),c="<td>\t\t\t\t<a class='overlay-tooltip' \t\t\t\t\tdata-toggle='tooltip' \t\t\t\t\tdata-placement = 'right'\t\t\t\t\ttitle='See this record in a new window'\t\t\t\t\tstyle='color:#28a;' \t\t\t\t\thref='"+d+"'\t\t\t\t\ttarget='_blank'>\t\t\t\t\t"+(b+1)+" <i class='icon-share'></i>\t\t\t\t</a>\t\t\t</td>"):c="<td>"+(b+1)+"</td>","<tr>"+c+"<td>"+h.join("</td><td>")+"</td></tr>"}})).call(this);