((function(){this.App=this.App||{},App.render_url_from_html_state=function(){var a,b;a={},a.x_axis=App.current_x_axis()||App.current_x_axis(App.filters[0]),a.y_axis=App.current_y_axis()||App.current_y_axis(App.values[0]),a.remove_blanks=""+App.remove_blanks(),a.sort_order=App.sort_order(),App.get_all_filters().forEach(function(b){if(b.values.length>0)return a[b.key]=b.values.join(App.config.param_joiner)}),b=$("#overlay_header").is(":visible"),b&&(a.overlay=!0,a.overlay_target=$("#overlay_target").text(),a.page=$("#page_number").text()||1),console.log("navigating to",a);if(App.respond_to_html_changes)return Finch.navigate(a)},App.current_x_axis=function(a){var b;return a&&($(".x_axis_controller").removeClass("current_x_axis"),b=$("#"+a+"_accordion .x_axis_controller").addClass("current_x_axis"),console.log("requesting new with x-axis:",a,"selector:",b),App.render_url_from_html_state()),$(".current_x_axis").attr("data-column-name")},App.current_y_axis=function(a){var b;return a&&(console.log("requested y-axis: ",a),$(".y_axis_controller").removeClass("current_y_axis"),b=$("#value_container .y_axis_controller."+a).addClass("current_y_axis"),console.log("requesting new with y-axis:",a,"selector:",b),App.render_url_from_html_state(),App.rescale()),$(".current_y_axis").attr("data-column-name")},App.toggle_filter=function(a){var b,c,d;return c=$(a),b=$(a).attr("data-column"),d=$(a).attr("data-value"),c.hasClass("inactive")?App.set_filter(b,d,"active"):App.set_filter(b,d,"inactive")},App.set_filter=function(a,b,c){var d;c==null&&(c="active"),console.log("set filter: "+b+" -> "+c);if(d=$("."+a+".value[data-value='"+b+"']"))return d.removeClass("active").removeClass("inactive").addClass(c),console.log(d),App.render_url_from_html_state()},App.set_all_filters=function(a,b,c){var d;return c==null&&(c=!1),a==="inactive"?d=$("."+b+".value.active"):a==="active"&&(d=$("."+b+".value.inactive")),c?d.each(function(a,b){if($(b).is(":visible"))return $(b).toggleClass("inactive").toggleClass("active")}):d.toggleClass("inactive").toggleClass("active"),console.log("set all filters to ",a,b,d,"visible_only",c),App.render_url_from_html_state()},App.get_filter_values=function(a,b){var c,d;return c=(b!=null?b.all_if_none:void 0)||!1,d=$(".filters ."+a+".active.value").map(function(a,b){return b.innerHTML.trim()}).get(),d.length===0&&c&&(d=$(".filters ."+a+".value").map(function(a,b){return b.innerHTML.trim()}).get(),console.log("got values because none",d)),d},App.get_all_filters=function(a){var b,c;return b=App.filters,c=[],b.forEach(function(b){var d,e;return e=App.get_filter_values(b,a),d={key:b,values:e},c.push(d)}),c},App.rescale=function(){return App.render_dashboard({rescale_y:!0})},App.sort_order=function(a){var b,c,d,e;return c=$("#sort_order"),a&&(console.log("setting sort_order to",a),d=App.sort_orders.map(function(a){return a.name}).indexOf(a),e=App.sort_orders[d],c=$("#sort_order").attr("data-sort-order",e.name).html("Sort order: "+e.text),App.render_url_from_html_state()),b=c.attr("data-sort-order")},App.sort_order_function=function(){return App.sort_orders.filter(function(a){return a.name===App.sort_order()})[0]["function"]},App.toggle_sort_order=function(){var a,b,c,d;return b=App.sort_orders.length,a=App.sort_orders.map(function(a){return a.name}).indexOf(App.sort_order()),c=(a+1)%b,d=App.sort_orders[c],App.sort_order(d.name)},App.remove_blanks=function(){var a,b;return b=$("#remove_blanks"),a=b.hasClass("btn-success")},App.set_remove_blanks=function(a){var b,c;return c=$("#remove_blanks"),a===!0?(c.removeClass("btn-danger").addClass("btn-success"),b="On"):(c.addClass("btn-danger").removeClass("btn-success"),b="Off"),c.text("Remove blanks: "+b),App.render_url_from_html_state()},App.toggle_remove_blanks=function(){return App.remove_blanks()===!0?App.set_remove_blanks(!1):App.set_remove_blanks(!0)}})).call(this);