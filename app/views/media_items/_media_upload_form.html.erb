<div class='well well-small'>
  <style>
      .flexslider {
          width: 540px;
          height: 350px;
          border: 0 !important;
          margin-bottom: 3em !important;
      }
      .flexslider .frame {
          text-align: center;
          width: 100%;

      }
      .flexslider .frame  img {
          width:auto;
          height: 350px;
          max-width: 100%;
          max-height: 100%;
          display: inline-block;
      }
  </style>

  <!-- Old code, its not needed anymore, but will keep until branch feature is complete --Aba
  <script>
      var url = window.location + "/media_items"
      $.get(url, print_data)

      function print_data(data) {
          var target = $('#media_items')
          if(data["contents"] && data.contents.length > 0) {
              menu = data.contents.map(function(d) {
                  url = ("/projects/<%= @project.id %>/media_items/" + d.key)

                  return "<li data-id=" + d.key + " class='document'>" +
                          '<img src="'+d.icon+'" />'  +
                          "&ensp;<a href='" + url + "'>" +
                          d.name +
                          "</a>" +
                          " </li>"
              }).join("")
          }
          else {
              menu = "<li>(No files yet, please add one below!)</li>"
          }
          target.html(menu)
          <% if current_user_is_aiddata %>
          $('.document').each(function(i) {
              render_delete_link = function(el, id) {
                  $(el).text("").removeClass("btn btn-warning btn-small")
                  $(el).append("<a class='btn btn-small btn-danger' data-method='delete' href='/projects/<%= @project.id %>/media_items/"+ id + "'>DELETE!</a>")
              }
              doc = $(this)
              doc_id = doc.attr("data-id")
              doc.append("<span class='btn btn-warning btn-small' style='margin:5px;' onclick='render_delete_link(this," + doc_id + ")'>Delete?</span>")
          })
          <% end %>

      }
  <div style="padding-top:100px;">
    <iframe id="player_1" src="http://player.vimeo.com/video/39683393?api=1&player_id=player_1" width="540" height="304" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
  </div>
  </script>
  -->
  <!-- Place somewhere in the <body> of your page -->

  <div class="flexslider">
    <ul class="slides">
      <% if @project.get_publishable_media_items.each do |media_item| %>

          <li>
            <div class="frame">
              <% if media_item.media_type == 'youtube' %>
                  <%= raw(media_item.youtube_embed(media_item.url)) %>
              <% else %>
                  <%= image_tag media_item.media.url %>
              <% end %>
            </div>
          </li>

      <% end.empty? %>
         <%= image_tag('adt.png')%>

      <% end %>
    </ul>
  </div>

 <!-- this code allows aiddata users to see and delete all media files that have been uploaded for the project
  <% if current_user_is_aiddata %>
    <% @project.get_all_media_items.each do |media_item| %>
      <p>
      <%= link_to media_item.media_file_name, media_item.media.url %>
      <% if current_user_is_aiddata %>
         <a class='btn btn-small btn-danger' data-method='delete' href='/projects/<%= @project.id %>/media_items/<%=media_item.id %>'>DELETE!</a>
      <% end %>
      </p>
    <% end %>
  <% end %>
   -->


  <div class="row-fluid" >
    <div class= "span4" style="text-align:center">
      <%= link_to  "<h3>Upload File</h3>".html_safe, '#upload_file', { 'data-toggle' => 'modal', 'data-target' => "#upload_file"}%></div>
    <div class= "span4" style="text-align:center">
      <%= link_to  "<h3>Share Video</h3>".html_safe, '#share_video', { 'data-toggle' => 'modal', 'data-target' => "#share_video"}%></div>
    <div class= "span4" style="text-align:center">
      <%= link_to  "<h3>Downloads</h3>".html_safe, '#download_file', { 'data-toggle' => 'modal', 'data-target' => "#download_file"}%></div>
  </div>

  <div id="download_file" class="modal hide fade in" style="text-align:center;">

  <% downloadable_media = @project.get_downloadable_media_items %>

  <% if !downloadable_media.empty? %>
      <h3>Download Files:</h3>
  <% else %>
      <p>
      <h4 style="text-align:center">
      There are currently no files to download.</h4>
      </p>
  <% end %>

  <% downloadable_media.each do |media_item| %>
      <p>
        <%= link_to media_item.media_file_name, media_item.media.url %>
      </p>
  <% end %>
  </div>



  <div id="upload_file" class="modal hide fade in" style="text-align:center;">
    <h3>Upload a File</h3>
      <% if current_user %>
         <%= form_tag "#{project_path @project}/media_items", :multipart => true, onsubmit: "return confirm_terms_and_conditions(this)" do %>
         <%= file_field_tag "media" %>
         <%= hidden_field_tag( "user_id", current_user[:id]) %>
         <%= submit_tag 'Upload', class: "btn btn-info" %>
         <div class='row-fluid'>
            <input style='display:inline;' type='checkbox' required="true" id='terms_and_conditions'/>
            <label style='display:inline;'>
              I accept the <%= link_to "terms and conditions", "http://www.aiddata.org/content/index/about/terms-conditions" %>.
            </label>
         </div>
      <% end %>
  </div>

  <div id="share_video" class="modal hide fade in" style="text-align:center;">
      <h3>Share a Video</h3>
      <p>Enter url here:</p>
      <%= form_tag "#{project_path @project}/media_items", :multipart => true do %>
          <%= text_field_tag "url" %>
          <%= hidden_field_tag( "user_id", current_user[:id]) %>
          <%= hidden_field_tag( "video", "youtube") %>
          <%= submit_tag 'Share', class: "btn btn-info" %>
      <% end %>
  </div>

  <% else %>
      <p><i> Please
        <%= link_to "sign in", signin_path %>
        to contribute files!</i>
      </p>
  <% end %>
</div>

<script>
    // Can also be used with $(document).ready()
    // Javascript for file viewer
    $(window).load(function() {
        $('.flexslider').flexslider({
            animation: "slide"

        });
    });
</script>